<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <meta name="description" content="PhotoBooth - Capture photos and create photo strips with custom designs">
    <meta name="theme-color" content="#d4af37">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="PhotoBooth">
    <title>PhotoBooth - Home</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üì∏</text></svg>">
</head>
<body>
    <div class="container">
        <header>
            <h1>üì∏ FE2P PhotoBooth</h1>
            <p>Flawless Events 2 Perfection</p>
        </header>

        <main>
            <div class="home-page">
                <div class="navigation-cards">
                    <a href="photobooth.html" class="nav-card">
                        <div class="nav-card-icon">üì∑</div>
                        <h2>Photo Booth</h2>
                        <p>Take photos and create photo strips</p>
                    </a>

                    <a href="design.html" class="nav-card">
                        <div class="nav-card-icon">üé®</div>
                        <h2>Custom Design</h2>
                        <p>Import and manage strip designs</p>
                    </a>

                    <a href="print.html" class="nav-card">
                        <div class="nav-card-icon">üñ®Ô∏è</div>
                        <h2>Print Photos</h2>
                        <p>View and print your photos</p>
                    </a>
                </div>

                <!-- Google Drive Settings -->
                <div class="gdrive-settings-section">
                    <h2>Google Drive Sync</h2>
                    <p class="section-description">Auto-upload photos to Google Drive for backup and easy sharing.</p>

                    <div class="gdrive-config">
                        <div class="setting-group">
                            <label for="gdriveClientId">Client ID:</label>
                            <input type="text" id="gdriveClientId" class="setting-input" placeholder="Enter your Google OAuth Client ID">
                            <button id="saveClientIdBtn" class="btn btn-secondary" style="padding: 10px 20px;">Save</button>
                        </div>

                        <div class="gdrive-status-row">
                            <span id="driveStatus" class="drive-status not-configured">Not configured</span>
                            <button id="driveConnectBtn" class="btn btn-primary" style="padding: 10px 20px;">
                                <span class="btn-icon">üîó</span>
                                Connect Google Drive
                            </button>
                            <button id="driveDisconnectBtn" class="btn btn-danger" style="padding: 10px 20px; display: none;">
                                <span class="btn-icon">üîå</span>
                                Disconnect
                            </button>
                        </div>

                        <div class="gdrive-help">
                            <details>
                                <summary>How to get a Client ID</summary>
                                <ol>
                                    <li>Go to <a href="https://console.cloud.google.com/" target="_blank">Google Cloud Console</a></li>
                                    <li>Create a new project (or select existing)</li>
                                    <li>Enable the "Google Drive API"</li>
                                    <li>Go to "APIs & Services" &gt; "OAuth consent screen" and configure it</li>
                                    <li>Go to "Credentials" &gt; "Create Credentials" &gt; "OAuth client ID"</li>
                                    <li>Choose "Web application" and add your site URL to authorized origins</li>
                                    <li>Copy the Client ID and paste it above</li>
                                </ol>
                            </details>
                        </div>
                    </div>
                </div>

                <!-- Firebase Cloud Sync Settings -->
                <div class="firebase-config-section" id="firebaseConfigSection">
                    <h2>Cloud Sync</h2>
                    <p class="section-description">Sign in to sync your photos and sessions across devices.</p>

                    <div class="firebase-config-form">
                        <div class="setting-group">
                            <label for="firebaseApiKey">API Key:</label>
                            <input type="text" id="firebaseApiKey" class="setting-input" placeholder="Your Firebase API Key">
                        </div>
                        <div class="setting-group">
                            <label for="firebaseAuthDomain">Auth Domain:</label>
                            <input type="text" id="firebaseAuthDomain" class="setting-input" placeholder="your-app.firebaseapp.com">
                        </div>
                        <div class="setting-group">
                            <label for="firebaseProjectId">Project ID:</label>
                            <input type="text" id="firebaseProjectId" class="setting-input" placeholder="your-project-id">
                        </div>
                        <div class="setting-group">
                            <label for="firebaseStorageBucket">Storage Bucket:</label>
                            <input type="text" id="firebaseStorageBucket" class="setting-input" placeholder="your-app.appspot.com">
                        </div>
                        <div class="setting-group">
                            <label for="firebaseMessagingSenderId">Messaging Sender ID:</label>
                            <input type="text" id="firebaseMessagingSenderId" class="setting-input" placeholder="123456789">
                        </div>
                        <div class="setting-group">
                            <label for="firebaseAppId">App ID:</label>
                            <input type="text" id="firebaseAppId" class="setting-input" placeholder="1:123456789:web:abcdef">
                        </div>

                        <div class="firebase-config-actions">
                            <button class="btn btn-primary" onclick="saveFirebaseConfigFromUI()">
                                <span class="btn-icon">üíæ</span>
                                Save Configuration
                            </button>
                            <button class="btn btn-danger" onclick="clearFirebaseConfigUI()">
                                <span class="btn-icon">üóëÔ∏è</span>
                                Clear
                            </button>
                        </div>
                    </div>

                    <div class="firebase-help">
                        <details>
                            <summary>How to get Firebase configuration</summary>
                            <ol>
                                <li>Go to <a href="https://console.firebase.google.com/" target="_blank">Firebase Console</a></li>
                                <li>Create a new project (or select existing)</li>
                                <li>Go to Project Settings (gear icon)</li>
                                <li>Scroll down to "Your apps" and click "Add app" (Web)</li>
                                <li>Copy the config values from the code snippet</li>
                                <li>Enable Authentication (Email/Password) in Build > Authentication</li>
                                <li>Create a Firestore database in Build > Firestore Database</li>
                                <li>Create a Storage bucket in Build > Storage</li>
                            </ol>
                        </details>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>Flawless Events 2 Perfection (FE2P)</p>
            <p>Made by Sachin Sandhu</p>
        </footer>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

    <!-- Google Drive -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="gdrive.js"></script>

    <!-- App Scripts -->
    <script src="app.js"></script>
    <script src="firebase-config.js"></script>
    <script src="firebase-auth.js"></script>
    <script src="firebase-sync.js"></script>
    <script src="auth-ui.js"></script>
    <script>
        // Google Drive settings handlers
        document.addEventListener('DOMContentLoaded', () => {
            const clientIdInput = document.getElementById('gdriveClientId');
            const saveBtn = document.getElementById('saveClientIdBtn');
            const connectBtn = document.getElementById('driveConnectBtn');
            const disconnectBtn = document.getElementById('driveDisconnectBtn');

            // Load saved client ID
            if (clientIdInput) {
                clientIdInput.value = getGDriveClientId();
            }

            // Save client ID
            if (saveBtn) {
                saveBtn.addEventListener('click', () => {
                    const clientId = clientIdInput.value.trim();
                    if (clientId) {
                        saveGDriveClientId(clientId);
                        alert('Client ID saved! Click "Connect Google Drive" to sign in.');
                        updateDriveStatusUI();
                    } else {
                        alert('Please enter a valid Client ID');
                    }
                });
            }

            // Connect button
            if (connectBtn) {
                connectBtn.addEventListener('click', signInGDrive);
            }

            // Disconnect button
            if (disconnectBtn) {
                disconnectBtn.addEventListener('click', signOutGDrive);
            }

            // Initial UI update
            updateDriveStatusUI();
        });
    </script>
</body>
</html>
